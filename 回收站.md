# 回收站管理
短链接删除属于软删除会放入回收站，只有在回收站里面被删掉才是真正的被删掉。

# 短链接移到回收站      
启用标识设置为1，0代表是启用，送至回收站就变成未启用。


# 回收站分页列表查询
类似于分页查询短链接，但是启用标识是设置为1，且不带上分组标识，也就是既然你都给他移动至回收站了，那么原来分组可以说是失效了也就没有必要带上gid了，而且也不利于我们去检索， 因为我们不在乎被删除的短链接是来自哪个组，只要展示被删除的短链接就好了
比方说需要查找某个短链接，或者回收站要分页展示所有的短链接，或者是恢复短链接的时候，都需要知道gid才能找到对应的短链接，如果用户已经换组了，或者gid被删除，或者想跨组统一检索，就会比较麻烦。  

但是它实际上是查询link表的但是link表是由gid分组的，如果没有gid去查数据库他就会全表查询，这样肯定是不行的，  
那就是查询当前用户下的所有的分组，相当于我们在回收站分页查询之前，我们是需要把所有的gids全部查出来，然后复制给admin下面的remoteService，然后中台就能接收到，同时最后的查询出来的排序是应该为creatime排序且是倒序，符合栈的数据结构。  
大概得流程就是Controller接收到请求，然后调用RecycleServiceImpl业务层的方法，获取到当前用户下的所有的分组，等于说这个分组的信息是在admin服务下面获取到的然后再通过RemoteService转发给中台服务，sql语句里面加上一个in gids即可。
😧😧😧😧😧😧😧😧😧😧😧😧😧😧😧😧😧😧😧😧😧😧😧😧   优化点：若是在当前用户下面每次删除都需要查询用户下的所有的gid也就是gids，就会很麻烦，有没有可能用户一登录了就有一个gids来保存，用户创建分组或者删除分组修改分组了，对应的gids也会修改。

# 短链接从回收站回复
要传来一个gid 和一个fullshorturl ，同时进行缓存预热，也把对应的短链接的空key也给删掉，对应之前我们应对缓存穿透的解决方法中的设置的空值缓存。其实这里也没必要预热，因为正常一个刚从回收站里面拿出来的短链接应该不会有很多的访问量，如果有的话也就用我们之前的缓存击穿的方案去做就好了  
总体的流程就是找到启用标识为1改成启用标识为0即可。但是这里有个bug，就是在用户界面只是删除掉了短链接，他可能会忘记原来的分组，甚至说是短链接原处在的分组被删掉了要怎么办，😧😧😧😧😧😧😧😧😧😧😧😧😧😧😧😧😧😧😧😧😧😧😧😧😧😧😧这里有个bug需要修改，就是回复的时候要先判断原来的短链接分组  
是否被删掉，如果被删掉，我们就把此短链放入到默认分组里面。

# 短链接从回收站移除即 彻底删除短链接 但是我们使用baseMapper.delete(updateWrapper)的时候mybatis-plus还是会把del_flag置为1，也就是软删除并不会实际删除.

😧😧😧😧😧😧😧😧😧😧😧😧😧😧😧😧😧😧😧😧😧😧😧😧😧  布隆过滤器删除不掉 这个可不可以优化。e
